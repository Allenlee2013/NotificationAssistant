<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>通知小助手</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="modal.css">
</head>
<body>
  <div id="toast-container"></div>
  <div class="container">
    <header>
      <h1>健康生活，快乐工作~</h1>
      <div class="user-info">
        <span id="currentUserId">未连接</span>
        <span id="connectionStatus" class="status disconnected">已断开</span>
      </div>
    </header>

    <div class="main-content">
      <!-- 左侧边栏 -->
      <aside class="sidebar">
        <div class="card">
          <h3>连接设置</h3>
          <div class="form-group">
            <label>服务器地址:</label>
            <input type="text" id="serverUrl" value="ws://localhost:3000" />
          </div>
          <div class="form-group">
            <label>用户名:</label>
            <input type="text" id="username" placeholder="输入用户名" />
          </div>
          <div class="form-group">
            <label>密码:</label>
            <input type="password" id="password" placeholder="输入密码" />
          </div>
          <button id="connectBtn" class="btn btn-primary">连接</button>
        </div>

        <div class="card">
          <h3>主题订阅</h3>
          <div class="form-group">
            <label>主题名称:</label>
            <input type="text" id="topicInput" placeholder="例如: 部门公告" />
          </div>
          <button id="subscribeBtn" class="btn btn-success">订阅</button>
          <div class="subscriptions-list" id="subscriptionsList"></div>
        </div>

        <div class="card">
          <h3>系统设置</h3>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="autoStartCheckbox" />
              <span>开机自启动</span>
            </label>
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="centerNotificationCheckbox" />
              <span>居中显示通知</span>
            </label>
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="emailNotificationCheckbox" />
              <span>邮件通知</span>
            </label>
          </div>
          <div class="form-group" id="smtpConfigGroup" style="display: none;">
            <button id="configSmtpBtn" class="btn btn-secondary btn-full">配置SMTP服务器</button>
          </div>
        </div>
      </aside>

      <!-- 主内容区 -->
      <main class="content">
        <!-- 发布消息 -->
        <div class="card">
          <h3>发布消息</h3>
          <div class="form-group">
            <label>选择主题:</label>
            <select id="publishTopic"></select>
          </div>
          <div class="form-group">
            <label>消息内容:</label>
            <textarea id="messageContent" rows="3" placeholder="输入消息内容..."></textarea>
          </div>
          <div class="form-row">
            <button id="publishBtn" class="btn btn-primary">立即发布</button>
            <button id="scheduleBtn" class="btn btn-warning">设置定时</button>
          </div>
        </div>

        <!-- 定时消息设置 -->
        <div class="card" id="scheduleCard" style="display: none;">
          <h3>定时消息设置</h3>
          <div class="form-group">
            <label>发送日期:</label>
            <input type="date" id="scheduleDate" />
          </div>
          <div class="form-group">
            <label>发送时间:</label>
            <input type="time" id="scheduleTime" />
          </div>
          <div class="form-row">
            <button id="confirmScheduleBtn" class="btn btn-success">确认定时</button>
            <button id="cancelScheduleBtn" class="btn btn-secondary">取消</button>
          </div>
        </div>

        <!-- 待办消息列表 -->
        <div class="card">
          <h3>待办消息</h3>
          <div class="scheduled-messages-container" id="scheduledMessagesContainer">
            <div class="empty-state">暂无待办消息</div>
          </div>
        </div>

        <!-- 消息列表 -->
        <div class="card">
          <div class="tabs">
            <button class="tab-btn active" data-tab="immediate">未读消息</button>
            <button class="tab-btn" data-tab="history">已读消息</button>
          </div>
          <div class="messages-container" id="immediateMessagesContainer">
            <div class="empty-state">暂无未读消息</div>
          </div>
          <div class="messages-container" id="historyMessagesContainer" style="display: none;">
            <div class="empty-state">暂无已读消息</div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- SMTP配置弹窗 -->
  <div id="smtpModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>邮件通知配置</h3>
        <span class="modal-close" id="closeSmtpModal">&times;</span>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>邮箱:</label>
          <input type="email" id="smtpUser" placeholder="例如: yourname@qq.com" />
          <small style="color: #999;">邮件将发送到此邮箱</small>
        </div>
        <div class="form-group">
          <label>授权码/密码:</label>
          <input type="password" id="smtpPass" placeholder="邮箱授权码或密码" />
        </div>
        <div class="form-group">
          <label>邮箱服务商:</label>
          <select id="smtpProvider">
            <option value="qq">QQ邮箱</option>
            <option value="163">163网易</option>
            <option value="gmail">Gmail</option>
            <option value="outlook">Outlook</option>
            <option value="custom">自定义</option>
          </select>
        </div>
        <div class="form-group" id="customSmtpConfig" style="display: none;">
          <label>SMTP服务器:</label>
          <input type="text" id="smtpHost" placeholder="例如: smtp.example.com" />
        </div>
        <div class="form-group" id="customSmtpPort" style="display: none;">
          <label>端口:</label>
          <input type="number" id="smtpPort" placeholder="例如: 587" value="587" />
        </div>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="testEmail" checked />
            <span>保存后发送测试邮件</span>
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button id="saveSmtpBtn" class="btn btn-primary">保存配置</button>
        <button id="cancelSmtpBtn" class="btn btn-secondary">取消</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
